stages:
  #Jobs in the same stage run in parallel so we only need one stage but several jobs
  - test

#Jobs
test:
  stage: test
  tags:
    - django
  script:
    - apt-get update
    - apt install wget
    - apt install firefox | y
    - python3 -m pip install Pillow
    - python3 -m pip install selenium
    - wget https://github.com/mozilla/geckodriver/releases/download/v0.29.0/geckodriver-v0.29.0-linux64.tar.gz
    - tar -xf geckodriver-v0.29.0-linux64.tar.gz
    - chmod 777 geckodriver
    - export PATH=$PATH:$(pwd)
    - cd ziginc
    - python3 manage.py test schedge/tests
  only:
    - merge_requests
    - master
