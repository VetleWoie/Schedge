{% extends 'base.html' %}
{% load static %}
{% block title %}Event{% endblock %}
{% block stylesheet %}
<link rel="stylesheet" href="{% static 'css/eventbase.css' %}" />
<link rel="stylesheet" href="{% static 'css/event.css' %}" />
{% endblock %}
<!-- <head>
    {% load static %}
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" type="image/png" href="{% static 'favicon.ico' %}"/>

    <title>Event</title>
</head> -->
{% block content %}
<div class="wrap">
    <div class="left_box blob">
        <div class="eventinfo">
            <div class="image">
                {% if event.image.url != "/media/default.jpg" %}
                <img src="{{event.image.url}}" />
                {% endif %}
            </div>
            <h1> {{ event.title }} </h1>
            <table class="eventtable">
                <tr>
                    <td>Title</td>
                    <td id="id_event_title">{{ event.title }}</td>
                </tr>
                <tr>
                    <td>Hosted By</td>
                    <td>username: {{ event.host.username }} name: {{ event.host.first_name }} {{ event.host.last_name }}
                    </td>
                </tr>
                <tr>
                    <td>Location</td>
                    <td>{{ event.location }}</td>
                </tr>
                <tr>
                    <td>Start Time</td>
                    <td>{{ event.starttime }}</td>
                </tr>
                <tr>
                    <td>End Time</td>
                    <td>{{ event.endtime }}</td>
                </tr>
                <tr>
                    <td>Start Date</td>
                    <td>{{ event.startdate }}</td>
                </tr>
                <tr>
                    <td>End Date</td>
                    <td>{{ event.enddate }}</td>
                </tr>
                <tr>
                    <td>Duration</td>
                    <td>{{ event.duration }}</td>
                </tr>
                <tr>
                    <td>Description</td>
                    <td>{{ event.description }}</td>
                </tr>
            </table>
            <a href="/event/{{ event.id}}/edit/" class="editbtn">Edit</a>
        </div>

    </div>
    <div class="right_box">
        <div class="centred blob">
            <h2>Pick a Time</h2>
            <form action="{% url 'event' event_id=event.id %}" method="post" enctype="multipart/form-data">
                {% csrf_token %}
                {{ timeslotform.as_p }}
                <input type="submit" value="Submit">
            </form>
        </div>
        <div class="centred">
            {% for timeslot in timeslots %}
            <div class="blob timeslot">
                <table>
                    <tr>
                        <td>Time</td>
                        <td>{{timeslot.time}}</td>
                    </tr>
                    <tr>
                        <td>Date</td>
                        <td>{{timeslot.date }}</td>
                    </tr>
                </table>
                <form action="{% url 'timeslot_delete' event_id=event.id timeslot_id=timeslot.id %}" method="POST"
                    enctype="multipart/form-data">
                    {% csrf_token %}
                    <input type="submit" value="ðŸ—‘">
                </form>
            </div>
            {% endfor %}
        </div>
        <div class="centred blob">
            <h2>Invite Someone</h2>
            <form action="{% url 'event_invite' event_id=event.id%}" method="post" enctype="multipart/form-data">
                {% csrf_token %}
                <p>
                    <label>Invite:</label>
                    {{inviteform.invitee}}
                </p>
                <input type="submit" value="Submit">
            </form>
        </div>
        <div class="centred blob">
            <h2>Attendees</h2>
            <table class="centred people">
                {% for participant in participants %}
                <tr>
                    <td>
                        {{participant.user.first_name}} {{participant.user.last_name}}
                    </td>
                </tr>
                {% endfor %}
            </table>
        </div>
        <div class="centred blob">
            <h2>Pending Invitations</h2>
            <table class="centred people">
                {% for invite in invites %}
                <tr>
                    <td>
                        {{invite.invitee.first_name}} {{invite.invitee.last_name}}
                    </td>
                </tr>
                {% endfor %}
            </table>
        </div>
    </div>
</div>
{% endblock %}